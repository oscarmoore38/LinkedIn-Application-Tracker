@page
@model ManageApplicationModel
@{
    ViewData["Title"] = "Manage apps 💼";
    TimeSpan outOfWork = DateTime.Now - new DateTime(2023, 11, 15);
    int totalDays = @Convert.ToInt32(outOfWork.TotalDays);
    string outOfWorkStatus; 
    
    if (totalDays <= 30)
    {
        outOfWorkStatus = "Relax";
    }
    else if (totalDays <= 90 )
    {
        outOfWorkStatus = "Getting spicy";
    }
    else
    {
        outOfWorkStatus = "Oof!";
    }
}

<div class="text-center">
    <h1 class="display-4">@ViewData["Title"]</h1>
    <p>Use this page to manage your LinkedIn applications.</p>
</div>

<div class="quote-box">
    You've been out of work for @totalDays days - @outOfWorkStatus
</div>


<table class="table mt-5">
    <thead>
        <tr>
            <th scope="col">Date</th>
            <th scope="col">Title</th>
            <th scope="col">Company</th>
            <th scope="col">app URL</th>
            <th scope="col">Outcome</th>
            <th scope="col">Delete</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var app in Model.AppList)
    {
        <tr>
            <td>@app.Date</td>
            <td>@app.Title</td>
            <td>@app.Company</td>
            <td>@app.ApplicationURL</td>
            <td>@app.Outcome</td>
            <td>
                <form method="post" asp-page-handler="Delete" asp-route-id="@app.ApplicationID">
                    <button class="btn btn-danger">Delete</button>
                </form>
            </td>
        </tr>
    }
    </tbody>
</table>